(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,n){e.exports=n(60)},39:function(e,t,n){},40:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"get",function(){return v}),n.d(a,"getAll",function(){return j}),n.d(a,"getChannelPost",function(){return O});var r=n(0),o=n.n(r),i=n(28),c=n.n(i),s=(n(39),n(40),n(30)),l=n(8),u=n(9),p=n(10),m=n(12),h=n(11),d=n(13),f=n(7),g=n.n(f),w=n(19),b=n(14);function v(e){return y.apply(this,arguments)}function y(){return(y=Object(b.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=4;break}return e.next=3,fetch("https://nebula-aluben.firebaseio.com/posts/".concat(t,".json?print=pretty"));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(){return E.apply(this,arguments)}function E(){return(E=Object(b.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://nebula-aluben.firebaseio.com/posts.json?print=pretty");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e,t){return k.apply(this,arguments)}function k(){return(k=Object(b.a)(g.a.mark(function e(t,n){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.firestore().collection("channels").doc(t).collection("posts").doc(n).get();case 2:return a=e.sent,e.abrupt("return",a.data());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var x=n(21),C=n.n(x);n(26);C.a.initializeApp({projectId:"nebula-aluben"});n(53);function M(e){if("location"in e){var t=e.location.coords,n=t.latitude,a=t.longitude,r="https://www.google.com/maps/search/?api=1&query="+n+","+a,i="https://www.google.com/maps/dir/?api=1&dir_action=navigate&destination="+n+","+a;return o.a.createElement("div",{style:A.imagecardCTAGallary},o.a.createElement("a",{style:A.imagecardCTA,href:r},o.a.createElement("button",{type:"button"},"Show in Maps")),o.a.createElement("a",{style:A.imagecardCTA,href:i},o.a.createElement("button",{type:"button"},"Show Directions")))}return o.a.createElement("p",{style:A.textBlack},"Location Not Found!")}var I=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(b.a)(g.a.mark(function e(){var t,n,r,o=this;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,n=t.channelId,r=t.postId,n?a.getChannelPost(n,r).then(function(e){o.setState(Object(w.a)({},e))}):a.get(r).then(function(e){return e.json()}).then(function(e){console.log(e),o.setState(Object(w.a)({},e))});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if("image"in this.state){var e=this.state,t=e.image,n=e.highlight;return o.a.createElement("div",{style:A.imageCard},o.a.createElement("img",{src:t.uri,style:Object(w.a)({},A.image,{width:400,height:t.height/t.width*400,margin:10}),alt:""}),o.a.createElement("p",null,n.caption),o.a.createElement(M,this.state))}return"uri"in this.state?o.a.createElement("div",{style:A.imageCard},o.a.createElement("img",{src:this.state.uri,style:A.image,alt:""}),o.a.createElement(M,this.state)):o.a.createElement("div",{style:A.imageCard},o.a.createElement("p",null,"Image not Found!"))}}]),t}(o.a.Component),A={imageCard:{display:"flex",flexDirection:"column",backgroundColor:"#fff",borderRadius:2,margin:10,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:4.65,elevation:8},image:{width:400,margin:20},imagecardCTAGallary:{flexDirection:"row"},imagecardCTA:{margin:10}},D=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{style:{height:"100%"}},o.a.createElement(I,{postId:this.props.match.params.id?this.props.match.params.id:this.props.match.params.post_id,channelId:this.props.match.params.id?void 0:this.props.match.params.channel_id}))}}]),t}(o.a.Component),T=n(33),_=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).mapDOM=o.a.createRef(),n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){window.initMap=this.initMap.bind(this)}},{key:"initMap",value:function(){console.log("initMap called.");var e=window.google,t=window.MarkerClusterer,n=new e.maps.Map(document.getElementById("map"),{zoom:3,center:{lat:-28.024,lng:140.887}}),r=new t(n,[],{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"});a.getAll().then(function(e){return e.json()}).then(function(t){for(var a=0,o=Object.entries(t);a<o.length;a++){var i=o[a],c=Object(T.a)(i,2)[1];console.log(c),"location"in c&&"coords"in c.location&&function(){var t='<img src="'+c.uri+'" width="200">',a=new e.maps.InfoWindow({content:t}),o=new e.maps.Marker({position:{lat:c.location.coords.latitude,lng:c.location.coords.longitude},label:"loc"});o.addListener("click",function(){a.open(n,o)}),r.addMarker(o),r.fitMapToMarkers()}()}})}},{key:"render",value:function(){return o.a.createElement("div",{ref:this.mapDOM,id:"map",style:{height:"100%"}})}}]),t}(o.a.Component),B=function(e){return o.a.createElement("p",null,"404- Not Found")};var S=function(){return o.a.createElement(s.a,{basename:"/NebulaWeb"},o.a.createElement(l.c,null,o.a.createElement(l.a,{path:"/",exact:!0,component:_}),o.a.createElement(l.a,{path:"/post/:id",exact:!0,component:D}),o.a.createElement(l.a,{path:"/channels/:channel_id/posts/:post_id",exact:!0,component:D}),o.a.createElement(l.a,{component:B})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[34,1,2]]]);
//# sourceMappingURL=main.cbe47721.chunk.js.map